function Invoke-OGDDialog-General {
    param(
        [hashtable]$menu = @{
            "Kleuren" = @{
                "Rood"   = @{
                    "Een brandweerauto"    = {Write-Host 'Een brandweerauto is rood'}
                    "Een blikje Coca Cola" = {Write-Host 'Een blikje Coca Cola is rood'}
                    "Bloed"                = {Write-Host 'Bloed is rood'}
                } #End Rood
                "Groen"  = {write-host 'Je kiest groen'}
                "Blauw"  = {write-host 'Je kiest blauw'}
            } #End Kleuren
            "Leesplankje" = @{
                "Aap"  = {write-host 'Een aap'}
                "Noot" = {write-host 'Een noot'}
                "Mies" = {write-host 'Miesje'}
            } #End Leesplankje
            "Getallen" = @{
                "Een"  = {write-host 'Een'}
                "Twee" = {write-host 'Twee'}
                "Drie" = {write-host 'Drie'}
            } #End Getallen
        } #End menu
    ) #End param
    
    #logic for menu
    $ValidChoice = $false
    while(-not $validChoice){
        Clear-Host
        $keuzekeys = @($menu.Keys)
        $i = 1

        foreach($key in $keuzekeys){
            write-host "${i}: $key"
            $i++
        }
        
        [int]$keuze = read-host "Selecteer optienummer"

        #Take the input from user and search through the Menu hashtable for a match. If not, write an error and go back in the loop.
        try{
            $keuzekey = $keuzekeys[$keuze-1]
        
            $gekozenactie = $menu.$keuzekey
        
            if($gekozenactie -is [hashtable]){
                write-menu -menu $gekozenactie
            }
            
            if($gekozenactie -is [scriptblock]){
                Invoke-Command -ScriptBlock $gekozenactie -NoNewScope
            }
        
            $ValidChoice = $true
        
        }catch{
         #If the option selected is neither leading to the next menu, nor a scriptblock, write error and go back in the loop
         Write-Host 'Ongeldig commando, probeer het nog eens.'
         Start-Sleep -Seconds 1
        }
    } #End while loop
} #End Invoke-OGDDialog-General